var url,page_data={},$curtain=$('.black-curtain-in'),$page=$('#loaded-page'),projects={about:{image:'',page:'about.html',pageTitle:'TYLER WATSON | about'},'mv agusta':{image_id:'_mv',page:'mvagusta.html',pageTitle:'TYLER WATSON | MV Agusta'},'air & space':{image_id:'_air',page:'air&space.html',pageTitle:'TYLER WATSON | Air & Space'},'motion reel':{image_id:'_reel',page:'reel.html',pageTitle:'TYLER WATSON | Motion Reel'},panopticon:{image_id:'_panopticon',page:'panopticon.html',pageTitle:'TYLER WATSON | Panopticon'},Ã¦olia:{image_id:'_aeolia',page:'aeolia.html',pageTitle:'TYLER WATSON | AEOLIA'},eet:{image_id:'_eet',page:'eet.html',pageTitle:'TYLER WATSON | EET'},'gladwell series':{image_id:'_gladwell',page:'gladwell_series.html',pageTitle:'TYLER WATSON | Gladwell Series'},arsia:{image_id:'_arsia',page:'arsia.html',pageTitle:'TYLER WATSON | Arsia'}},keys=Object.keys(projects);function setPgData(e,i){e.index=keys.indexOf(i);var j=e.index;return e.name=i,e.url=projects[keys[j]].page,e.page='/projects/'+projects[keys[j]].page,e.image_id=projects[keys[j]].image_id,e.pageTitle=projects[keys[j]].pageTitle,e,keys}function updatePage_index(e,i){return i.index=e,name=keys[e],i.name=name,i}function returnImageID(e,i){var j=Object.keys(projects),k=j.indexOf(i);return e.image_id=projects[j[k]].image_id,e}function getNextProject_data(e,i){var j=e.index,k=i.length-1;return j=e.index==k?1:e.index+1,$('.status-current').prepend(e.index),$('.status-length').prepend(k),next_name=i[j],void $('i.data-project').prepend(next_name)}function push_pageHistory(e,i){var j=i[e.index],k=e.pageTitle,l=e.url;l=l.replace('.html',''),history.pushState(j,k,l)}function findURL(e,i){var j=keys.indexOf(e),k='/projects/'+projects[keys[j]].page;return updatePage_index(j,i),void loadProject(k)}function renderPopState(){window.addEventListener('popstate',function(e){return''==e.state||''===e.state.id?void curtainClose():history.state===e.state?void findURL(e.state,page_data):e.state},!1)}function closeProject(){curtainClose()}function returnDirection_val(e){var i=1.3*$(window).height();return'up'==e&&(e='-'+i),'down'==e&&(e=i),e}function resetCurtain(e){return new Promise(i=>{e.css({top:'120vh'}),i()})}function animCurtain(e,i){return e=returnDirection_val(e),i.animate({top:'+='+e},350,function(){}).promise()}var loadPage=function(e,i,j,k){return new Promise(l=>{$.ajax(j,{success:function(m){return ga('send',{hitType:'pageview',page:j}),k=m,l(k)}})})},curtainUp=function(){return new Promise(e=>{resetCurtain($curtain).then(()=>{e(animCurtain('up',$curtain))})})},curtainClose=function(){animCurtain('down',$curtain).then(()=>{emptyPage()}).then(()=>{setTimeout(function(){animCurtain('down',$curtain)},200)})},emptyPage=function(){return new Promise(e=>{$('#loaded-page').hide().empty(),e()})},appendData=function(e,i){return new Promise(j=>{e.append(i[0]).show(0,function(){getNextProject_data(page_data,keys);var k=$(this).find('.description'),l=k.outerHeight();$('.description-space').css({height:l}),$.getScript('/scripts/project.js',function(){j()})})})};function loadProject(e){Promise.all([loadPage($curtain,$page,e),curtainUp()]).then(i=>{emptyPage().then(()=>{appendData($page,i)}).then(()=>{setTimeout(function(){animCurtain('up',$curtain)},200)})})}function fadeInPreview(e){var i=$(e.target).text();returnImageID(page_data,i);var j='#'+page_data.image_id;that=$(j),that.stop(!0,!0).fadeIn(500).queue(!1)}function fadeOutPreview(e){var i=$(e.target).text();returnImageID(page_data,i);var j='#'+page_data.image_id;$(j).stop(!0,!1).fadeOut(500).queue(!1)}$(function(){function e(i){i.preventDefault();var j=$(i.target).text();return setPgData(page_data,j),push_pageHistory(page_data,keys),loadProject(page_data.page),page_data}history.replaceState('','',''),renderPopState(),$('li').on('click',e.bind(this)),$('.terminal > div p').on('click',e.bind(this)),$('li').mouseover(function(i){fadeInPreview(i)}).mouseout(function(i){fadeOutPreview(i)}),$('.space .projects').mouseover(function(){$('.page').stop(!0,!1).animate({opacity:'.85'},400,'linear')}).mouseout(function(){$('.page').stop(!0,!1).animate({opacity:'1'},400,'linear')})});
