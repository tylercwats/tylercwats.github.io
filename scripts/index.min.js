var url,page_data={},projects={about:{image:"",page:"about.html",pageTitle:"TYLER WATSON | about"},"mv agusta":{image_id:"_mv",page:"mvagusta.html",pageTitle:"TYLER WATSON | MV Agusta"},"air & space":{image_id:"_air",page:"air&space.html",pageTitle:"TYLER WATSON | Air & Space"},"motion reel":{image_id:"_reel",page:"reel.html",pageTitle:"TYLER WATSON | Motion Reel"},panopticon:{image_id:"_panopticon",page:"panopticon.html",pageTitle:"TYLER WATSON | Panopticon"},"Ã¦olia":{image_id:"_aeolia",page:"aeolia.html",pageTitle:"TYLER WATSON | AEOLIA"},eet:{image_id:"_eet",page:"eet.html",pageTitle:"TYLER WATSON | EET"},"gladwell series":{image_id:"_gladwell",page:"gladwell_series.html",pageTitle:"TYLER WATSON | Gladwell Series"},arsia:{image_id:"_arsia",page:"arsia.html",pageTitle:"TYLER WATSON | Arsia"}},keys=Object.keys(projects);function setPgData(e,t){e.index=keys.indexOf(t);var a=e.index;return e.name=t,e.url=projects[keys[a]].page,e.page="/projects/"+projects[keys[a]].page,e.image_id=projects[keys[a]].image_id,e.pageTitle=projects[keys[a]].pageTitle,keys}function updatePage_index(e,t){return t.index=e,name=keys[e],t.name=name,t}function returnImageID(e,t){var a=Object.keys(projects),n=a.indexOf(t);return e.image_id=projects[a[n]].image_id,e}function getNextProject_data(e,t){var a=e.index,n=t.length-1;a=e.index==n?1:e.index+1,$(".status-current").prepend(e.index),$(".status-length").prepend(n),next_name=t[a],$("i.data-project").prepend(next_name)}function push_pageHistory(e,t){var a=t[e.index],n=e.pageTitle,i=e.url;i=i.replace(".html",""),history.pushState(a,n,i)}function findURL(e,t){var a=keys.indexOf(e),n="/projects/"+projects[keys[a]].page;updatePage_index(a,t),emptyProject(),loadProject(n)}function renderPopState(){window.addEventListener("popstate",function(e){return""==e.state||""===e.state.id?void emptyProject():history.state===e.state?void findURL(e.state,page_data):e.state},!1)}function closeProject(e){var t=$(".black-curtain-in");setClass(t,"in_down").then(animCheck(".in_down",e,emptyPage(e))).then(animCheck(".in_down",e,setClass(t,"out_down")))}function animCheck(e,t,a){var n=new $.Deferred;return $(e).one("oanimationend msAnimationEnd animationend",function(e){}),n.resolve()}var emptyPage=function(){var e=new $.Deferred;return $("#loaded-page").hide().empty(),e.resolve()},emptyProject=function(){var e=new $.Deferred;return $("#loaded-page:has(*)").length?e.resolve():(emptyPage(),e.resolve())},loadPage=function(e,t,a){new $.Deferred;$(".in_up").one("oanimationend msAnimationEnd animationend",function(e){t.load(a,function(e){return getNextProject_data(page_data,keys),$.getScript("/scripts/project.js"),$(this).show(0,function(e){var t=$(this).find(".description").outerHeight();$(".description-space").css({height:t}),$.Deferred(function(e){$(e.resolve)})}),page_data})})};function setClass(e,t){var a=new $.Deferred;return e.addClass(t),a.resolve()}var out_up=function(e){e.addClass("out_up")};function resetClass(e){var t=new $.Deferred;return e.removeClass("in_up out_up in_down out_down"),t.resolve()}function loadProject(e){var t=$("#loaded-page"),a=$(".black-curtain-in");resetClass(a).then(setClass(a,"in_up")).then(emptyProject()).then(loadPage(a,t,e)),$(".in_up").one("oanimationend msAnimationEnd animationend",function(e){out_up(a)})}function fadeInPreview(e){var t=$(e.target).text();returnImageID(page_data,t);var a="#"+page_data.image_id;that=$(a),that.stop(!0,!0).fadeIn(500).queue(!1)}function fadeOutPreview(e){var t=$(e.target).text();returnImageID(page_data,t);var a="#"+page_data.image_id;$(a).stop(!0,!1).fadeOut(500).queue(!1)}$(function(){function e(e){var t=$(e.target).text();return setPgData(page_data,t),push_pageHistory(page_data,keys),loadProject(page_data.page),page_data}history.replaceState("","",""),renderPopState(),$("li").on("click",e.bind(this)),$(".terminal > div p").on("click",e.bind(this)),$("li").mouseover(function(e){fadeInPreview(e)}).mouseout(function(e){fadeOutPreview(e)}),$(".space .projects").mouseover(function(){$(".page").stop(!0,!1).animate({opacity:".85"},400,"linear")}).mouseout(function(){$(".page").stop(!0,!1).animate({opacity:"1"},400,"linear")})});
